/* 
 * Now.js v0.1.5 
 *  
 * https://github.com/hbi99/nowjs.js 
 * 
 * Copyright (c) 2013-2015, Hakan Bilgin <hbi@longscript.com> 
 * Licensed under the MIT License 
 */ 
var Now=function(a,b,c){"use strict";function d(a,b){this._methods=[],this._owner=a,this._that=b,this._paused=!1}function e(a,b,c,d){var e="GET",f=new XMLHttpRequest;if("withCredentials"in f)f.open(e,b,!0);else{if("undefined"==typeof XDomainRequest)throw"XHR not supported";f=new XDomainRequest,f.open(e,b)}return f.hash=c,f.key=d,f.owner=a,f.onload=this.doload,f}function f(){var a={};return this.queue=new d(this,a),this}return d.prototype={add:function(a){this._methods.push(a),this._paused||this.flush()},flush:function(){var a;if(!this._paused)for(;this._methods[0];)if(a=this._methods.shift(),a.apply(this._that,arguments),a._paused){this._paused=!0;break}}},e.prototype={doload:function(a){var b,c=JSON.parse(a.target.responseText),d=[],e=!0;if(this.hash){this.hash[this.key]=c;for(b in this.hash)"string"==typeof this.hash[b]&&(e=!1);e&&d.push(this.hash)}this.owner.queue._paused=!1,this.owner.queue.flush.apply(this.owner.queue,d)}},f.prototype={fork:function(){return new f},wait:function(a){var b=this,c=function(){setTimeout(function(){b.queue._paused=!1,b.queue.flush()},a)};return c._paused=!0,this.queue.add(c),this},then:function(a){return a&&this.queue.add(a),this},load:function(a,b,c){var d=this,f=function(){var f=new e(d,a,b,c);f.send()};if("object"==typeof a){for(var g in a)this.load(a[g],a,g);return this}return f._paused=!0,this.queue.add(f),this},recursive:function(a){return a&&this.queue.add(a),this}},new f}(window,document);if("undefined"==typeof module)var module={};module.exports=Now;